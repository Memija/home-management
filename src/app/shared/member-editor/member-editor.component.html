<div class="member-edit-form">
  <div class="form-grid">
    <div class="form-group">
      <label for="edit-member-name">{{ 'SETTINGS.NAME' | translate }}</label>
      <input type="text" id="edit-member-name" name="edit-member-name" autocomplete="given-name" [ngModel]="editName()"
        (ngModelChange)="onNameChange($event)" title="{{ 'SETTINGS.NAME' | translate }}"
        [class.error]="editNameError()">
      @if (editNameError()) {
      <div class="warning-message">
        <lucide-icon [img]="TriangleAlertIcon" size="20" class="warning-icon"></lucide-icon>
        <span>{{ editNameError() | translate }}</span>
      </div>
      }
    </div>
    <div class="form-group">
      <label for="edit-member-surname">{{ 'SETTINGS.SURNAME' | translate }}</label>
      <input type="text" id="edit-member-surname" name="edit-member-surname" autocomplete="family-name"
        [ngModel]="editSurname()" (ngModelChange)="onSurnameChange($event)" title="{{ 'SETTINGS.SURNAME' | translate }}"
        [class.error]="editSurnameError()">
      @if (editSurnameError()) {
      <div class="warning-message">
        <lucide-icon [img]="TriangleAlertIcon" size="20" class="warning-icon"></lucide-icon>
        <span>{{ editSurnameError() | translate }}</span>
      </div>
      }
    </div>
  </div>
  <div class="form-grid">
    <div class="form-group">
      <span class="form-label">{{ 'SETTINGS.TYPE' | translate }}</span>
      <div class="toggle-group">
        <button type="button" [class.active]="editType() === 'adult'" (click)="editType.set('adult')"
          title="{{ 'SETTINGS.TYPES.ADULT' | translate }}">
          <lucide-icon [img]="AdultIcon" size="16"></lucide-icon>
          <span class="toggle-text">{{ 'SETTINGS.TYPES.ADULT' | translate }}</span>
        </button>
        <button type="button" [class.active]="editType() === 'kid'" (click)="editType.set('kid')"
          title="{{ 'SETTINGS.TYPES.KID' | translate }}">
          <lucide-icon [img]="KidIcon" size="16"></lucide-icon>
          <span class="toggle-text">{{ 'SETTINGS.TYPES.KID' | translate }}</span>
        </button>
      </div>
    </div>
    <div class="form-group">
      <span class="form-label">{{ 'SETTINGS.GENDER' | translate }}</span>
      <div class="toggle-group">
        <button type="button" [class.active]="editGender() === 'male'" (click)="editGender.set('male')"
          title="{{ 'SETTINGS.GENDERS.MALE' | translate }}">
          <lucide-icon [img]="MaleIcon" size="16"></lucide-icon>
          <span class="toggle-text">{{ 'SETTINGS.GENDERS.MALE' | translate }}</span>
        </button>
        <button type="button" [class.active]="editGender() === 'female'" (click)="editGender.set('female')"
          title="{{ 'SETTINGS.GENDERS.FEMALE' | translate }}">
          <lucide-icon [img]="FemaleIcon" size="16"></lucide-icon>
          <span class="toggle-text">{{ 'SETTINGS.GENDERS.FEMALE' | translate }}</span>
        </button>
      </div>
    </div>
  </div>
  <div class="form-group">
    <span class="form-label">{{ 'SETTINGS.UPLOAD_PICTURE' | translate }}</span>
    <label class="upload-btn">
      <lucide-icon [img]="ImportIcon" size="16"></lucide-icon>
      {{ 'SETTINGS.UPLOAD_PICTURE' | translate }}
      <input type="file" id="edit-member-file" name="edit-member-file" accept="image/*"
        (change)="handleFileUpload($event)" class="hidden-input">
    </label>
    @if (customPicturePreview()) {
    <div class="picture-preview">
      <img [src]="customPicturePreview()" alt="Preview">
    </div>
    }
  </div>
  <div class="form-group">
    <span class="form-label">{{ 'SETTINGS.OR_SELECT_AVATAR' | translate }}</span>
    <div class="avatar-grid">
      @for (avatar of avatars(); track avatar; let i = $index) {
      <img [src]="avatar" [class.selected]="editAvatar() === avatar && !customPicturePreview()"
        alt="Avatar option {{ i + 1 }}" (click)="selectAvatar(avatar)"
        title="{{ 'SETTINGS.SELECT_AVATAR' | translate }}">
      }
    </div>
  </div>
  <div class="button-group">
    <button type="button" class="save-btn" (click)="onSave()"
      [disabled]="!editName() || !editSurname() || editNameError() || editSurnameError()"
      title="{{ 'SETTINGS.SAVE_MEMBER' | translate }}">
      <lucide-icon [img]="SaveIcon" size="16"></lucide-icon>
      <span class="btn-text">{{ 'SETTINGS.SAVE_MEMBER' | translate }}</span>
    </button>
    <button type="button" class="cancel-btn" (click)="onCancel()" title="{{ 'SETTINGS.CANCEL' | translate }}">
      <lucide-icon [img]="CancelIcon" size="16"></lucide-icon>
      <span class="btn-text">{{ 'SETTINGS.CANCEL' | translate }}</span>
    </button>
  </div>
</div>